---
layout: "@/layouts/block-docs-layout.astro"
title: CAN_MESSAGE
---

import docstring from "@blocks/IO/PROTOCOLS/CAN/CANABLE/CAN_MESSAGE/docstring.json";
import app from "@blocks/IO/PROTOCOLS/CAN/CANABLE/CAN_MESSAGE/app.json";
import PythonDocsDisplay from "@/components/python-docs-display.astro";
import AppDisplay from "@/components/app-display.tsx";

<PythonDocsDisplay docstring={docstring} />
<AppDisplay app={app} client:visible />

<details>
<summary>Python Code</summary>
```python
import can, traceback, json
from can.interface import Bus
from flojoy import flojoy, SerialDevice, Vector, DataContainer, TextBlob
from typing import Optional


@flojoy(deps={"python-can": "4.2.2"})
def CAN_MESSAGE(
    device: SerialDevice,
    message: Vector | Optional[DataContainer] = None,
    # arbitration_id: hex = 0xC0FFEE, TODO: Support hex inputs
    is_extended_id: bool = True,
) -> TextBlob:
    """The CAN_MESSAGE node sends a message onto CAN network through a slcan-compatible USB-to-CAN adapter.

    Inputs
    ------
    message : Vector
        The array of data to send to the CAN bus.

    Parameters
    ----------
    arbitration_id : int
        Unique ID for message being sent.
    is_extended_id : bool
        Flag that controls the size of the arbitration_id field.

    Returns
    -------
    Textblob
        Traceback error
    """

    s = ""
    try:
        can.rc["interface"] = "slcan"
        can.rc["channel"] = device.get_port()
        can.rc["bitrate"] = 500000

        s = json.dumps(can.rc)

        msg = can.Message(
            data=message.v, arbitration_id=0xC0FFEE, is_extended_id=is_extended_id
        )

        with can.Bus() as bus:
            bus.send(msg)
    except:
        s = traceback.format_exc()

    return TextBlob(s)

```
[Find this Flojoy Block on GitHub](https://github.com/flojoy-ai/blocks/blob/main/blocks/IO/PROTOCOLS/CAN/CANABLE/CAN_MESSAGE/CAN_MESSAGE.py)
</details>


## Example
